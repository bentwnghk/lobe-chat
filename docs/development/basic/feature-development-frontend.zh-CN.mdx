# å¦‚ä½•å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼šå‰ç«¯å®ç°

Mr.ğŸ†– AI åŸºäº Next.js æ¡†æ¶æ„å»ºï¼Œä½¿ç”¨ TypeScript ä½œä¸ºä¸»è¦å¼€å‘è¯­è¨€ã€‚åœ¨å¼€å‘æ–°åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬éœ€è¦éµå¾ªä¸€å®šçš„å¼€å‘æµç¨‹ï¼Œä»¥ç¡®ä¿ä»£ç çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚å¤§è‡´çš„æµç¨‹åˆ†ä¸ºä»¥ä¸‹äº”æ­¥ï¼š

1. è·¯ç”±ï¼šå®šä¹‰è·¯ç”± (`src/app`)
2. æ•°æ®ç»“æ„ï¼š å®šä¹‰æ•°æ®ç»“æ„ ( `src/types` )
3. ä¸šåŠ¡åŠŸèƒ½å®ç°ï¼š zustand store (`src/store`)
4. é¡µé¢å±•ç¤ºï¼šä¹¦å†™é™æ€ç»„ä»¶ / é¡µé¢ (`src/app/<new-page>/features/<new-feature>.tsx`)
5. åŠŸèƒ½ç»‘å®šï¼šç»‘å®š store ä¸é¡µé¢çš„è§¦å‘ (`const  [state,function]= useNewStore(s=>[s.state,s.function])`)

æˆ‘ä»¬ä»¥ "ä¼šè¯æ¶ˆæ¯" åŠŸèƒ½ä¸ºä¾‹ï¼Œä»¥ä¸‹æ˜¯å®ç°è¿™ä¸ªåŠŸèƒ½çš„ç®€è¦æ­¥éª¤ï¼š

## 1. å®šä¹‰è·¯ç”±

åœ¨ `src/app` ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„è·¯ç”±æ¥æ‰¿è½½ "ä¼šè¯æ¶ˆæ¯" é¡µé¢ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šåœ¨ `src/app` ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ `chat`ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åˆ›å»º `page.tsx`æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­å¯¼å‡º React ç»„ä»¶ä½œä¸ºé¡µé¢çš„ä¸»ä½“ã€‚

```tsx
// src/app/chat/page.tsx
import ChatPage from './features/chat';

export default ChatPage;
```

## 2. å®šä¹‰æ•°æ®ç»“æ„

åœ¨ `src/types` ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ "ä¼šè¯æ¶ˆæ¯" çš„æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `chat.ts` æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ `ChatMessage` ç±»å‹ï¼š

```ts
// src/types/chat.ts

export type ChatMessage = {
  id: string;
  content: string;
  timestamp: number;
  sender: 'user' | 'bot';
};
```

## 3. åˆ›å»º Zustand Store

åœ¨ `src/store` ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ Zustand Store æ¥ç®¡ç† "ä¼šè¯æ¶ˆæ¯" çš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª `chatStore.ts` æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ª Zustand Storeï¼š

```ts
// src/store/chatStore.ts
import create from 'zustand';

type ChatState = {
  messages: ChatMessage[];
  addMessage: (message: ChatMessage) => void;
};

export const useChatStore = create<ChatState>((set) => ({
  messages: [],
  addMessage: (message) => set((state) => ({ messages: [...state.messages, message] })),
}));
```

## 4. åˆ›å»ºé¡µé¢ä¸ç»„ä»¶

åœ¨ `src/app/<new-page>/features/<new-feature>.tsx` ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢æˆ–ç»„ä»¶æ¥æ˜¾ç¤º "ä¼šè¯æ¶ˆæ¯"ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ Zustand Storeï¼Œä»¥åŠ Ant Design çš„ç»„ä»¶æ¥æ„å»º UIï¼š

```jsx
// src/features/chat/index.tsx
import { List, Typography } from 'antd';
import { useChatStore } from 'src/store/chatStore';

const ChatPage = () => {
  const messages = useChatStore((state) => state.messages);

  return (
    <List
      dataSource={messages}
      renderItem={(message) => (
        <List.Item>
          <Typography.Text>{message.content}</Typography.Text>
        </List.Item>
      )}
    />
  );
};

export default ChatPage;
```

## 5. åŠŸèƒ½ç»‘å®š

åœ¨é¡µé¢æˆ–ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°† Zustand Store çš„çŠ¶æ€å’Œæ–¹æ³•ç»‘å®šåˆ° UI ä¸Šã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å°† `messages` çŠ¶æ€ç»‘å®šåˆ°äº†åˆ—è¡¨çš„ `dataSource` å±æ€§ä¸Šã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªæ–¹æ³•æ¥æ·»åŠ æ–°çš„æ¶ˆæ¯ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Zustand Store ä¸­å®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼Œç„¶ååœ¨é¡µé¢æˆ–ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼š

```jsx
import { Button } from 'antd';

const ChatPage = () => {
  const messages = useChatStore((state) => state.messages);
  const addMessage = useChatStore((state) => state.addMessage);

  const handleSend = () => {
    addMessage({ id: '1', content: 'Hello, world!', timestamp: Date.now(), sender: 'user' });
  };

  return (
    <>
      <List
        dataSource={messages}
        renderItem={(message) => (
          <List.Item>
            <Typography.Text>{message.content}</Typography.Text>
          </List.Item>
        )}
      />
      <Button onClick={handleSend}>Send</Button>
    </>
  );
};

export default ChatPage;
```

ä»¥ä¸Šå°±æ˜¯åœ¨ Mr.ğŸ†– AI ä¸­å®ç° "ä¼šè¯æ¶ˆæ¯" åŠŸèƒ½çš„æ­¥éª¤ã€‚å½“ç„¶ï¼Œåœ¨ Mr.ğŸ†– AI çš„å®é™…å¼€å‘ä¸­ï¼ŒçœŸå®åœºæ™¯æ‰€é¢ä¸´çš„ä¸šåŠ¡è¯‰æ±‚å’Œåœºæ™¯è¿œæ¯”ä¸Šè¿° demo å¤æ‚ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œå¼€å‘ã€‚
