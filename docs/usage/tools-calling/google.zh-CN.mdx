---
title: Google Gemini ç³»åˆ— Tools Calling  è¯„æµ‹
description: >-
  ä½¿ç”¨ Mr.ğŸ†– AI æµ‹è¯• Google Gemini ç³»åˆ—æ¨¡å‹ï¼ˆGemini 1.5 Pro / Gemini 1.5
  Flashï¼‰çš„å·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰èƒ½åŠ›ï¼Œå¹¶å±•ç°è¯„æµ‹ç»“æœ
tags:
  - Tools Calling
  - Benchmark
  - Function Calling è¯„æµ‹
  - å·¥å…·è°ƒç”¨
  - æ’ä»¶
---

# Google Gemini ç³»åˆ— Tools Calling

Google Gemini ç³»åˆ—æ¨¡å‹ Tools Calling èƒ½åŠ›ä¸€è§ˆï¼š

| æ¨¡å‹ | æ”¯æŒ Tools Calling | æµå¼ ï¼ˆStreamï¼‰ | å¹¶å‘ï¼ˆParallelï¼‰ | ç®€å•æŒ‡ä»¤å¾—åˆ† | å¤æ‚æŒ‡ä»¤ |
| --- | --- | --- | --- | --- | --- |
| Gemini 1.5 Pro | âœ… | âŒ | âœ… | â›” | â›” |
| Gemini 1.5 Flash | âŒ | âŒ | âŒ | â›” | â›” |

<Callout type={'important'}>
  æ ¹æ®æˆ‘ä»¬çš„çš„å®é™…æµ‹è¯•ï¼Œå¼ºçƒˆå»ºè®®ä¸è¦ç»™ Gemini å¼€å¯æ’ä»¶ï¼Œå› ä¸ºç›®å‰ï¼ˆæˆªæ­¢2024.07.07ï¼‰å®ƒçš„ Tools Calling
  èƒ½åŠ›å®åœ¨å¤ªçƒ‚äº†ã€‚
</Callout>

## Gemini 1.5 Pro

### ç®€å•è°ƒç”¨æŒ‡ä»¤ï¼šå¤©æ°”æŸ¥è¯¢

æµ‹è¯•æŒ‡ä»¤ï¼šæŒ‡ä»¤ â‘ 

<Video src="https://github.com/lobehub/lobe-chat/assets/28616219/a5a35431-2a15-4e79-97d5-502637f829bc" />

Gemini è¾“å‡ºçš„ json ä¸­ï¼Œname æ˜¯é”™è¯¯çš„ï¼Œå› æ­¤ Mr.ğŸ†– AI æ— æ³•è¯†åˆ«åˆ°å®ƒè°ƒç”¨äº†ä»€ä¹ˆæ’ä»¶ã€‚ï¼ˆå…¥å‚ä¸­ï¼Œå¤©æ°”æ’ä»¶çš„ name ä¸º `realtime-weather____fetchCurrentWeather`ï¼Œè€Œ Gemini è¿”å›çš„æ˜¯ `weather____fetchCurrentWeather`ï¼‰ã€‚

<Image
  alt="Gemini 1.5 Pro ç®€å•æŒ‡ä»¤çš„ Tools Calling"
  src="https://github.com/lobehub/lobe-chat/assets/28616219/1e077799-c25e-43c7-8492-c5c0bb9aed9b"
/>

<details>
  <summary>Tools Calling åŸå§‹è¾“å‡ºï¼š</summary>

```yml
[stream start] 2024-7-7 17:53:25.647
[chunk 0] 2024-7-7 17:53:25.654
{"candidates":[{"content":{"parts":[{"text":"å¥½çš„"}],"role":"model"},"finishReason":"STOP","index":0}],"usageMetadata":{"promptTokenCount":95,"candidatesTokenCount":1,"totalTokenCount":96}}

[chunk 1] 2024-7-7 17:53:26.288
{"candidates":[{"content":{"parts":[{"text":"\n\n"}],"role":"model"},"finishReason":"STOP","index":0,"safetyRatings":[{"category":"HARM_CATEGORY_SEXUALLY_EXPLICIT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HATE_SPEECH","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HARASSMENT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_DANGEROUS_CONTENT","probability":"NEGLIGIBLE"}]}],"usageMetadata":{"promptTokenCount":95,"candidatesTokenCount":1,"totalTokenCount":96}}

[chunk 2] 2024-7-7 17:53:26.336
{"candidates":[{"content":{"parts":[{"functionCall":{"name":"weather____fetchCurrentWeather","args":{"city":"æ­å·"}}},{"functionCall":{"name":"weather____fetchCurrentWeather","args":{"city":"åŒ—äº¬"}}}],"role":"model"},"finishReasoSTOP","index":0,"safetyRatings":[{"category":"HARM_CATEGORY_SEXUALLY_EXPLICIT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HATE_SPEECH","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HARASSMENT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_DANGEROUS_CONTENT","probability":"NEGLIGIBLE"}]}],"usageMetadata":{"promptTokenCount":95,"candidatesTokenCount":79,"totalTokenCount":174}}

[stream finished] total chunks: 3
```

</details>

### å¤æ‚è°ƒç”¨æŒ‡ä»¤ï¼šæ–‡ç”Ÿå›¾

æµ‹è¯•æŒ‡ä»¤ï¼šæŒ‡ä»¤ â‘¡

<Image
  alt="Gemini 1.5 Pro å¤æ‚æŒ‡ä»¤çš„ Tools Calling"
  src="https://github.com/lobehub/lobe-chat/assets/28616219/a2454a60-3271-4786-861f-d49ceac1316e"
/>

åœ¨æµ‹è¯•å¤æ‚æŒ‡ä»¤é›†æ—¶ï¼ŒGoogle ç›´æ¥æŠ›é”™ï¼š

```json
{
  "message": "[400 Bad Request] Invalid JSON payload received. Unknown name \"maxItems\" at 'tools[0].function_declarations[0].parameters.properties[0].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"minItems\" at 'tools[0].function_declarations[0].parameters.properties[0].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[1].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[3].value': Cannot find field.\nInvalid JSON payload received. Unknown name \"default\" at 'tools[0].function_declarations[0].parameters.properties[4].value': Cannot find field. [{\"@type\":\"type.googleapis.com/google.rpc.BadRequest\",\"fieldViolations\":[{\"field\":\"tools[0].function_declarations[0].parameters.properties[0].value\",\"description\":\"Invalid JSON payload received. Unknown name \\\"maxItems\\\" at 'tools[0].function_declarations[0].parameters.properties[0].value': Cannot find field.\"},{\"field\":\"tools[0].function_declarations[0].parameters.properties[0].value\",\"description\":\"Invalid JSON payload received. Unknown name \\\"minItems\\\" at 'tools[0].function_declarations[0].parameters.properties[0].value': Cannot find field.\"},{\"field\":\"tools[0].function_declarations[0].parameters.properties[1].value\",\"description\":\"Invalid JSON payload received. Unknown name \\\"default\\\" at 'tools[0].function_declarations[0].parameters.properties[1].value': Cannot find field.\"},{\"field\":\"tools[0].function_declarations[0].parameters.properties[3].value\",\"description\":\"Invalid JSON payload received. Unknown name \\\"default\\\" at 'tools[0].function_declarations[0].parameters.properties[3].value': Cannot find field.\"},{\"field\":\"tools[0].function_declarations[0].parameters.properties[4].value\",\"description\":\"Invalid JSON payload received. Unknown name \\\"default\\\" at 'tools[0].function_declarations[0].parameters.properties[4].value': Cannot find field.\"}]}]"
}
```

ä¸Šè¿°æŠ›é”™ä¸­æåˆ°å¹¶ä¸æ”¯æŒåŒ…å« `maxItems` çš„ schemaï¼Œå› æ­¤ Gemini 1.5 Pro ç›¸å½“äºæ— æ³•ä½¿ç”¨ DallE æ’ä»¶ã€‚

ç›¸å…³ issue:

- [Support for minItems and maxItems for FunctionDeclarationSchemaType.ARRAY?](https://github.com/google-gemini/generative-ai-js/issues/200)
- [Gemini Models unusable when dalle plugin is enabled](https://github.com/lobehub/lobe-chat/issues/2537)

ç»¼åˆä»¥ä¸Šä¸¤ä¸ªæµ‹è¯•æ¥çœ‹ï¼ŒGoogle çš„ Tool Calling èƒ½åŠ›ä¼¼ä¹æ˜¯æ”¯æŒäº†ï¼Œä½†æ˜¯å‡ ä¹æ²¡æ³•åœ¨æ—¥å¸¸ä¸­ä½¿ç”¨ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºå·²ç»ç­‰äºè™šå‡å®£ä¼ äº†ã€‚

## Gemini 1.5 Flash

### ç®€å•è°ƒç”¨æŒ‡ä»¤ï¼šå¤©æ°”æŸ¥è¯¢

æµ‹è¯•æŒ‡ä»¤ï¼šæŒ‡ä»¤ â‘ 

<Video src="https://github.com/lobehub/lobe-chat/assets/28616219/6cab77e8-d761-4a91-8325-a61748cebac1" />

è€Œ Gemini 1.5 flash æ›´ä¸ºæŠ½è±¡ï¼Œè¯´å®Œè°ƒç”¨å°±ç»“æŸäº†ã€‚ç»“åˆä»¥ä¸‹åŸå§‹è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼ŒGemini 1.5 Flash å¹¶æ²¡æœ‰è¾“å‡º Tool Calling çš„æ•°æ®ï¼Œå› æ­¤å¯ä»¥è¯´æ˜¯å®Œå…¨ä¸å¯ç”¨ã€‚

```yml
stream start] 2024-7-7 19:4:50.936
[chunk 0] 2024-7-7 19:4:50.943
{"candidates":[{"content":{"parts":[{"text":"å¥½çš„"}],"role":"model"},"finishReason":"STOP","index":0}],"usageMetadata":{"promptTokenCount":96,"candidatesTokenCount":1,"totalTokenCount":97}}

[chunk 1] 2024-7-7 19:4:52.209
{"candidates":[{"content":{"parts":[{"text":"ï¼Œè¯·ç¨ç­‰ï¼Œæˆ‘æ­£åœ¨æŸ¥è¯¢æ­å·å’ŒåŒ—äº¬çš„å¤©æ°”ä¿¡æ¯ã€‚ "}],"role":"model"},"finishReason":"STOP","index":0,"safetyRatings":[{"category":"HARM_CATEGORY_SEXUALLY_EXPLICIT","probability":"NEGLIGIBLE"ATEGORY_HATE_SPEECH","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HARASSMENT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_DANGEROUS_CONTENT","probability":"NEGLIGIBLE"}]}],"usageMetadata":{"promptTokenCount":96,"candidatesTokenCount":16,"totalTokenCount":112}}

[chunk 2] 2024-7-7 19:4:53.288
{"candidates":[{"content":{"parts":[{"text":"\n"}],"role":"model"},"finishReason":"STOP","index":0,"safetyRatings":[{"category":"HARM_CATEGORY_SEXUALLY_EXPLICIT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HATE_SPEECH","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_HARASSMENT","probability":"NEGLIGIBLE"},{"category":"HARM_CATEGORY_DANGEROUS_CONTENT","probability":"NEGLIGIBLE"}]}],"usageMetadata":{"promptTokenCount":96,"candidatesTokenCount":16,"totalTokenCount":112}}

[stream finished] total chunks: 3
```

### å¤æ‚è°ƒç”¨æŒ‡ä»¤ï¼šæ–‡ç”Ÿå›¾

æµ‹è¯•æŒ‡ä»¤ï¼šæŒ‡ä»¤ â‘¡

è¯¥æŒ‡ä»¤å’Œ Gemini 1.5 Pro çš„å¤æ‚æŒ‡ä»¤ä¸€æ ·ï¼Œç›´æ¥æŠ›é”™ï¼Œå› æ­¤ä¸å†è¯¦ç»†å±•å¼€ã€‚
